# Приложение № 1. Описание регламента предоставления библиографических записей, электронных материалов, формализованных описаний классификационных систем

## Сценарий 1. Регистрация нового поставщика данных

Поставка данных осуществляется через Систему интеграции данных Национальной электронной библиотеки (НЭБ СИД),
публично доступной через Интернет по URL "[https://catalog.rusneb.ru][13]"

-   __1.1.__ Для упрощения верификации заявки, убедитесь, что у вас есть e-mail адрес использующий домен вашей организации

-   __1.2.__ Перейти по адресу, указанному [https://catalog.rusneb.ru][13] и выполнить описпанные шаги

-   __1.3.__ Получите на указанный в **шаге 2.** e-mail адрес ваш личный код доступа (набор латинских букв и чисел).
   
    Код доступа не предназначен для передачи за пределы организации, на которую оформлена учетная запись поставщика данных.
   
    В случае утери кода доступа необходимо выполнить такие же шаги, как и при регистрации учетной записи и указать тот же почтовый адрес

Дальнейшие шаги предусматривают сценарий самостоятельного экспорта в СИД.

Предполагается, что первичная процедура импорта осуществляется под руководством компетентного технического сотрудника организации-оператора системы. До этого желательно предоставить сотруднику организации-оператора информацию о планируемых к поставке данных, а также небольшие примеры в оригинальном формате.

Это позволит совместно с организацией-оператором выработать оптимальный формат и сценарий импорта. 
   

## Сценарий 2. Самостоятельное выполнения технической операции экспорта данных в Систему интеграции данных НЭБ:

Шаги, описанные ниже, предполагают, что вы уже зарегистрировали учетную запись поставщика данных и для нее прдоставлен код технического доступа.

-   __2.1.__ Осуществить размещение одного или более блоков данных, соотетствующий описанным ниже форматам.

    Блок данных может быть выложен без сжатия или используя формат gzip, в таком случае URL файла должен соджержать расширение `.gz`
  
    Форматы сжатия данных иные, чем GZIP (например: `TAR` `BZ2` `7ZIP`, `ZIP`) **не поддерживаются!**

-   __2.2.__ Запустить процесс автоматического импорта СИД путем выполнения HTTP POST запроса вида:
       
    ```shell script
    $ curl \
       -s \
       -d '{"account": "my.post@my-organisation.ru", "secret":"ВСТАВЬТЕ СЮДА КОД ДОСТУПА", "type": "import", "parameters": { "url":"ВСТАВЬТЕ ДОСТУПНЫЙ ПУБЛИЧНо HTTP АДРЕС ОБЪЕКТА ИМПОРТА", "provider": "my-organisation", "mediaType": "ВЫБЕРИТЕ IANA МЕДИА-ТИП СООТВЕТСТВУЮЩИЙ ФОРМАТУ"}}' \
       -H "Content-Type: application/json" \
       -X POST https://catalog.rusneb.ru/operations/
    ```
    
    Пример (запрос не выполнится до конца, сославшись на некорректный код доступа):
       
   ```shell script
   $ curl -s -d '{"account": "catalog@rusneb.ru", "secret":"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX", "type": "import", "parameters": { "url":"https://storage.rusneb.ru/source/lod.rsl.ru/UDC_2020-04-29_15-57-33.nq.gz", "provider": "rusneb.ru", "mediaType": "application/n-quads"}}' -H "Content-Type: application/json" -X POST https://catalog.rusneb.ru/operations/
   ```

-   __2.3.__ Дождаться завершения операции, статус которой можно получить, сделав HTTP GET запрос с помощью веб-браузера или любого другого HTTP клиента.

    ```shell script 
    https://catalog.rusneb.ru/operations.json?account=my.en%40rusneb.ru&secret=ВАШxКОДxДОСТУПА
    ```
    
    Пример адреса приведен для учетной записи, оформленной на email адрес `my.post@my-organisation.ru`, используйте адрес из **шага 1.** вместо него:

-   __2.4.__ В случае отсутствия у операции импорта статуса `SUCCESSFUL`, кода, отличного от `HTTP 200` или других проблем при выполнении импорта, обьратитесь к организации-оператору.
   
    Для этого используйте контактные данные, которые вы можете найти по HTTP адресу: "[https://catalog.rusneb.ru/][13]" 

    Список поддерживаемых СИД стандартов и форматов импорта данных приведен в [Приложение 2. Поддерживаемы СИД форматы импорта данных.] 

    Там же дана информация о поддерживаемых онтологических системах, кодах отношений сущностей и пространствах имен RDF

[13]: https://catalog.rusneb.ru
